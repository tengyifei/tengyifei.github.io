!function(a){function b(){a("#album-list").prepend("<p>Robot temporarily malfunctioning. Check back later. :P</p>")}var c=function(){this.nextAcademicYear=function(a){return a>=8},this.toYear=function(a){a=new Date(1e3*a);var b=a.getFullYear();return this.nextAcademicYear(a.getMonth()+1)&&b++,b},this.get=function(a){var e,b={"iRobotics Demno at 4H":2013},c=Number.MAX_VALUE,d=Number.MIN_VALUE,f=function(){this.handler=function(a){var f=this.toYear(a.datetime);if(null!=b[a.title])f=b[a.title];else if(null!=(e=a.title.match(/20\d\d-20\d\d/)))f=parseInt(e[0].substr(0,4))+1;else if(null!=(e=a.title.match(/20\d\d-\d\d/)))f=parseInt(e[0].substr(0,4))+1;else if(null!=(e=a.title.match(/20\d\d/)))f=parseInt(e[0].substr(0,4)),2014==f&&7<=new Date(1e3*a.datetime).getMonth()?f=this.toYear(a.datetime):(-1<a.title.toLowerCase().indexOf("fall")||-1<a.title.toLowerCase().indexOf("quad"))&&f++;else if(null!=(e=a.title.match(/\d\d?\/\d\d?\/\d\d/))){var f=parseInt(e[0].substr(e[0].length-2,2))+2e3,g=parseInt(e[0].split("/")[1]);this.nextAcademicYear(g)&&f++}a.year=f,f>d&&(d=f),c>f&&(c=f)}};return f.prototype=this,f=new f,a.forEach(f.handler,f),[c,d]}},d=function(b,c){var d=b[0],e=b[1],f=[];this.fillAlbumArray=function(){for(var a=0;e-d+1>a;a++)f[f.length]={year:a+d,albums:[]};c.forEach(function(a){f[a.year-d].albums.push(a)})},this.showAlbum=function(){for(var b=a("#album-list"),c=f.length-1;c>=0;c--){var d=f[c],e=d.albums,g="alb-"+d.year;for(b.append('<h3 class="photo-header" data-album="'+g+'">'+(d.year-1)+"-"+d.year+" \u2193</h3>"),b.append('<div id="'+g+'" class="photogroup photogroup-hidden"></div>'),d=a("#"+g),g=0;g<e.length;g++)d.append('<div class="album-each"><a target="_blank" href="'+e[g].link+'"><br><img class="album" src="http://imgur.com/'+e[g].cover+'b.jpg" alt="'+e[g].title+'"><br>'+e[g].title+"<br></a>")}a("#album-list h3").click(function(b){b=a("#"+a(b.target).data("album")),b.hasClass("photogroup-hidden")?b.removeClass("photogroup-hidden"):b.addClass("photogroup-hidden")})},this.render=function(){this.fillAlbumArray(),this.showAlbum()}};a.ajax({url:"https://api.imgur.com/3/account/irobotics/albums/",method:"GET",headers:{Authorization:"Client-ID 0ad87485d642182",Accept:"application/json"},data:{},success:function(a){if(a.success&&200===a.status)try{var e=a.data.sort(function(a,b){return a.datetime>b.datetime?-1:a.datetime==b.datetime?0:1}),f=(new c).get(e);new d(f,e).render()}catch(g){b()}else b()},error:function(){b()}})}(jQuery);