(function(g){function h(){g("#album-list").prepend("<p>Robot temporarily malfunctioning. Check back later. :P</p>")}var l=function(){this.nextAcademicYear=function(a){return 8<=a};this.toYear=function(a){a=new Date(1E3*a);var d=a.getFullYear();this.nextAcademicYear(a.getMonth()+1)&&d++;return d};this.get=function(a){var d={"iRobotics Demno at 4H":2013},b=Number.MAX_VALUE,g=Number.MIN_VALUE,f,k=function(){this.handler=function(e){var c=this.toYear(e.datetime);if(null!=d[e.title])c=d[e.title];else if(null!=
(f=e.title.match(/20\d\d-20\d\d/)))c=parseInt(f[0].substr(0,4))+1;else if(null!=(f=e.title.match(/20\d\d/)))c=parseInt(f[0].substr(0,4)),2014==c&&7<=(new Date(1E3*e.datetime)).getMonth()?c=this.toYear(e.datetime):(-1<e.title.toLowerCase().indexOf("fall")||-1<e.title.toLowerCase().indexOf("quad"))&&c++;else if(null!=(f=e.title.match(/\d\d?\/\d\d?\/\d\d/))){var c=parseInt(f[0].substr(f[0].length-2,2))+2E3,a=parseInt(f[0].split("/")[1]);this.nextAcademicYear(a)&&c++}e.year=c;c>g&&(g=c);c<b&&(b=c)}};
k.prototype=this;k=new k;a.forEach(k.handler,k);return[b,g]}},m=function(a,d){var b=a[0],h=a[1],f=[];this.fillAlbumArray=function(){for(var a=0;a<h-b+1;a++)f[f.length]={year:a+b,albums:[]};d.forEach(function(a){f[a.year-b].albums.push(a)})};this.showAlbum=function(){for(var a=g("#album-list"),e=f.length-1;0<=e;e--){var c=f[e],d=c.albums,b="alb-"+c.year;a.append('<h3 class="photo-header" data-album="'+b+'">'+(c.year-1)+"-"+c.year+" \u2193</h3>");a.append('<div id="'+b+'" class="photogroup photogroup-hidden"></div>');
c=g("#"+b);for(b=0;b<d.length;b++)c.append('<div class="album-each"><a target="_blank" href="'+d[b].link+'"><br><img class="album" src="http://imgur.com/'+d[b].cover+'b.jpg" alt="'+d[b].title+'"><br>'+d[b].title+"<br></a>")}g("#album-list h3").click(function(a){a=g("#"+g(a.target).data("album"));a.hasClass("photogroup-hidden")?a.removeClass("photogroup-hidden"):a.addClass("photogroup-hidden")})};this.render=function(){this.fillAlbumArray();this.showAlbum()}};g.ajax({url:"https://api.imgur.com/3/account/irobotics/albums/",
method:"GET",headers:{Authorization:"Client-ID 0ad87485d642182",Accept:"application/json"},data:{},success:function(a){if(a.success&&200===a.status)try{var d=a.data.sort(function(a,b){return a.datetime>b.datetime?-1:a.datetime==b.datetime?0:1}),b=(new l).get(d);(new m(b,d)).render()}catch(g){h()}else h()},error:function(a,d,b){h()}})})(jQuery);